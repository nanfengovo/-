import { w as e } from "../utils/index.js";
import { defineComponent as l, ref as a, useAttrs as t, computed as o, watch as u, nextTick as n, openBlock as s, createElementBlock as i, createElementVNode as r, normalizeClass as c, normalizeStyle as d, unref as m, createVNode as p, createCommentVNode as h, toDisplayString as x } from "vue";
import { _ as g } from "../checkbox/index2.js";
import { i as v } from "../_chunks/@vueuse/index.js";
const f = { class: "layui-textarea-wrapper" }, y = ["rows", "cols", "value", "placeholder", "name", "disabled", "maxlength"], b = { key: 0, class: "layui-textarea-clear" }, w = { key: 1, class: "layui-texterea-count" }, C = e(l({ name: "LayTextarea", props: { modelValue: null, name: null, placeholder: null, disabled: { type: Boolean }, showCount: { type: Boolean }, allowClear: { type: Boolean }, cols: null, rows: null, maxlength: null, autosize: { type: [Boolean, Object] } }, emits: ["blur", "input", "update:modelValue", "change", "focus", "clear"], setup(e2, { expose: l2, emit: C2 }) {
  const V = e2, k = a(null), j = a(false), B = t(), H = a("auto"), z = o(() => ({ width: V.cols ? "" : "100%", height: V.rows ? "" : H.value, minHeight: V.rows ? "" : "100px" })), _ = o(() => Object.assign(z.value, B.style)), O = function(e3) {
    const l3 = e3.target;
    j.value || (C2("update:modelValue", l3.value), n(() => {
      C2("input", l3.value);
    }));
  }, F = function(e3) {
    C2("focus", e3);
  }, I = function(e3) {
    C2("blur", e3);
  }, L = (e3) => {
    const l3 = e3.target;
    C2("change", l3.value);
  }, R = function() {
    C2("update:modelValue", ""), C2("clear");
  }, S = () => {
    j.value = true;
  }, T = (e3) => {
    j.value = false, O(e3);
  }, $ = o(() => {
    var _a;
    return ((_a = V.modelValue) == null ? void 0 : _a.length) > 0;
  }), q = o(() => {
    var _a, _b;
    let e3 = String((_b = (_a = V.modelValue) == null ? void 0 : _a.length) != null ? _b : 0);
    return V.maxlength && (e3 += "/" + V.maxlength), e3;
  });
  u([() => V.modelValue, k], () => {
    var _a;
    if (!k.value || !V.autosize)
      return;
    const e3 = ((_a = k.value) == null ? void 0 : _a.scrollHeight) + 2;
    if (v(V.autosize)) {
      const { minHeight: l3, maxHeight: a2 } = V.autosize;
      if (e3 < l3 || e3 > a2)
        return;
    }
    H.value = "1px", n(() => {
      var _a2;
      H.value = `${((_a2 = k.value) == null ? void 0 : _a2.scrollHeight) + 2}px`;
    });
  }, { immediate: true });
  return l2({ focus: () => {
    n(() => {
      var _a;
      (_a = k.value) == null ? void 0 : _a.focus();
    });
  }, blur: () => {
    n(() => {
      var _a;
      (_a = k.value) == null ? void 0 : _a.blur();
    });
  } }), (l3, a2) => (s(), i("div", f, [r("textarea", { ref_key: "textareaRef", ref: k, class: c(["layui-textarea", { "layui-textarea-disabled": e2.disabled }]), rows: e2.rows, cols: e2.cols, value: e2.modelValue, placeholder: e2.placeholder, name: e2.name, disabled: e2.disabled, maxlength: e2.maxlength, style: d(m(_)), onCompositionstart: S, onCompositionend: T, onInput: O, onFocus: F, onChange: L, onBlur: I }, null, 46, y), e2.allowClear && m($) ? (s(), i("span", b, [p(m(g), { type: "layui-icon-close-fill", onClick: R })])) : h("", true), e2.showCount ? (s(), i("div", w, x(m(q)), 1)) : h("", true)]));
} }));
export { C as default };
