import { w as e } from "../utils/index.js";
import { defineComponent as o, ref as t, shallowRef as l, computed as i, onMounted as r, onBeforeUnmount as n, withDirectives as a, openBlock as s, createElementBlock as u, normalizeClass as c, unref as p, normalizeStyle as d, withModifiers as f, renderSlot as m, createVNode as v, vShow as w } from "vue";
import { _ as y } from "../checkbox/index2.js";
const b = ["onClick"], g = e(o({ name: "LayBacktop", props: { target: { default: "window" }, showHeight: { default: 200 }, disabled: { type: Boolean, default: false }, position: null, right: null, bottom: null, size: null, bgcolor: null, opacity: null, color: null, borderRadius: null, circle: { type: Boolean, default: false }, icon: { default: "layui-icon-top" }, iconSize: { default: 30 }, iconColor: null }, emits: ["click"], setup(e2, { emit: o2 }) {
  const g2 = e2, h = t(null), k = l(void 0);
  let x = t(0 === g2.showHeight);
  const z = i(() => ({ "layui-backtop-medium": "medium" === g2.size, "layui-backtop-small": "small" === g2.size })), C = i(() => g2.circle ? "50%" : "number" == typeof g2.borderRadius ? `${g2.borderRadius}px` : g2.borderRadius), E = i(() => ({ position: g2.position, right: `${g2.right}px`, bottom: `${g2.bottom}px`, backgroundColor: g2.bgcolor, opacity: g2.opacity, color: g2.color, borderRadius: C.value })), $ = (e3) => {
    g2.disabled || (() => {
      if (k.value)
        if (k.value instanceof Window)
          window.scrollTo({ top: 0, left: 0, behavior: "smooth" });
        else {
          const e4 = Date.now(), o3 = k.value.scrollTop, t2 = () => {
            if (!k.value || k.value instanceof Window)
              return;
            const l2 = (Date.now() - e4) / 450;
            var i2;
            l2 < 1 ? (k.value.scrollTop = o3 * (1 - ((i2 = l2) < 0.5 ? 2 * i2 * i2 : 1 - 2 * (i2 - 1) * (i2 - 1))), window.requestAnimationFrame(t2)) : k.value.scrollTop = 0;
          };
          window.requestAnimationFrame(t2);
        }
    })(), o2("click", e3);
  }, R = () => {
    h.value.style.opacity = "1";
  }, T = () => {
    h.value.style.opacity = "0.95";
  }, S = (e3, o3) => {
    let t2 = getComputedStyle(e3), l2 = "absolute" === t2.position, i2 = o3 ? /(auto|scroll|hidden)/ : /(auto|scroll)/;
    for (let o4 = e3; o4 = o4.parentElement; )
      if (t2 = getComputedStyle(o4), (!l2 || "static" !== t2.position) && i2.test(t2.overflow + t2.overflowY + t2.overflowX))
        return o4;
    return window;
  }, q = ((e3, o3) => {
    var t2 = null;
    return (...l2) => {
      t2 || (t2 = setTimeout(() => {
        t2 = null, e3.apply(this, l2);
      }, o3));
    };
  })(() => {
    if (!k.value)
      return;
    const e3 = k.value instanceof Window ? window.pageYOffset : k.value.scrollTop;
    x.value = e3 >= g2.showHeight;
  }, 300);
  return r(() => {
    g2.target && (k.value = (() => {
      if ("window" === g2.target)
        return S(h.value, false);
      {
        const e3 = document.querySelector(g2.target);
        if (!e3)
          throw new Error(`target is not existed: ${g2.target}`);
        if ("absolute" === g2.position) {
          if (!e3.parentElement)
            throw new Error(`target parent element is not existed: ${g2.target}`);
          e3.parentElement.style.position = "relative";
        }
        return e3;
      }
    })(), k.value.addEventListener("scroll", q));
  }), n(() => {
    var _a;
    (_a = k.value) == null ? void 0 : _a.removeEventListener("scroll", q);
  }), (e3, o3) => a((s(), u("div", { ref_key: "backtopRef", ref: h, class: c(["layui-backtop", p(z)]), style: d({ ...p(E) }), onClick: f($, ["stop"]), onMousedown: R, onMouseup: T }, [m(e3.$slots, "default", {}, () => [v(p(y), { type: g2.icon, size: `${g2.iconSize}px`, color: g2.iconColor }, null, 8, ["type", "size", "color"])])], 46, b)), [[w, p(x)]]);
} }));
export { g as default };
