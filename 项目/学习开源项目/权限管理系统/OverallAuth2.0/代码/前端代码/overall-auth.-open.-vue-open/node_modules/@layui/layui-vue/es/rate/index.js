import { w as e } from "../utils/index.js";
import { defineComponent as l, ref as a, computed as o, watch as u, openBlock as t, createElementBlock as n, normalizeClass as i, createElementVNode as c, Fragment as s, renderList as r, unref as d, normalizeStyle as f, renderSlot as y, createTextVNode as v, toDisplayString as m, createCommentVNode as p } from "vue";
const h = ["onMousemove", "onClick"], k = { key: 0 }, V = l({ name: "LayRate", props: { theme: null, length: { default: 5 }, modelValue: { default: 0 }, readonly: { type: [Boolean, String], default: false }, half: { type: Boolean, default: false }, text: { type: Boolean, default: false }, isBlock: { type: Boolean, default: false }, allowClear: { type: Boolean, default: false }, clearIcon: { default: "layui-icon-close-fill" }, icons: { default: () => ["layui-icon-rate", "layui-icon-rate-half", "layui-icon-rate-solid"] } }, emits: ["update:modelValue", "select", "clear"], setup(e2, { emit: l2 }) {
  const V2 = e2, B2 = a(V2.modelValue), M = a(B2.value), g = o(() => V2.half && Math.round(B2.value) !== B2.value);
  u(() => V2.modelValue, () => {
    B2.value = V2.modelValue, M.value = V2.modelValue;
  });
  const C = function(e3, l3) {
    return V2.half ? e3 - (l3.offsetX <= l3.target.offsetWidth / 2 ? 0.5 : 0) : e3;
  }, x = function() {
    if (V2.readonly)
      return false;
    B2.value = M.value;
  }, w = o(() => !V2.readonly && V2.allowClear), I = function() {
    M.value = 0, B2.value = 0, l2("update:modelValue", 0), l2("clear", B2.value);
  };
  return (a2, o2) => (t(), n("div", { class: i(e2.isBlock ? "layui-block" : "layui-inline") }, [c("ul", { class: "layui-rate", onMouseleave: x }, [(t(true), n(s, null, r(e2.length, (a3) => (t(), n("li", { key: a3, onMousemove: (e3) => function(e4, l3) {
    if (V2.readonly)
      return false;
    B2.value = C(e4, l3);
  }(a3, e3), onClick: (e3) => function(e4, a4) {
    if (V2.readonly)
      return false;
    B2.value = C(e4, a4), M.value = B2.value, l2("update:modelValue", B2.value), l2("select", B2.value);
  }(a3, e3) }, [a3 <= Math.ceil(B2.value) ? (t(), n("i", { key: 0, class: i(["layui-icon", `${e2.icons[e2.icons.length - (d(g) && a3 === Math.ceil(B2.value) ? 2 : 1)]}`]), style: f({ color: e2.theme }) }, null, 6)) : (t(), n("i", { key: 1, class: i(["layui-icon"].concat(e2.icons[0])), style: f({ color: e2.theme }) }, null, 6))], 40, h))), 128))], 32), e2.text ? (t(), n("span", k, [y(a2.$slots, "default", { value: B2.value }, () => [v(m(B2.value + "\u661F"), 1)])])) : p("", true), d(w) && V2.modelValue > 0 ? (t(), n("i", { key: 1, class: i(["layui-icon", "layui-rate-clear-icon", e2.clearIcon]), onClick: I, title: "\u6E05\u9664\u8BC4\u5206" }, null, 2)) : p("", true)], 2));
} }), B = e(V);
export { B as default };
