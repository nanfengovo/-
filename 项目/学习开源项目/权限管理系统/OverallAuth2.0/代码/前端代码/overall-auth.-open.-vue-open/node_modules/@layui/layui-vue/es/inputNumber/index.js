import { w as e } from "../utils/index.js";
import { computed as t, inject as a, defineComponent as l, ref as n, watch as i, openBlock as u, createElementBlock as o, unref as r, createVNode as s, withCtx as d, createElementVNode as m, isRef as p } from "vue";
import { _ as c } from "../input/index2.js";
import { _ as b } from "../checkbox/index2.js";
import { _ as v } from "../button/index2.js";
const g = ["position", "size"], f = { class: "layui-input-number-input" }, y = e(l({ name: "LayInputNumber", props: { modelValue: { default: 0 }, name: null, disabled: { type: Boolean, default: false }, disabledInput: { type: Boolean, default: false }, size: null, step: { default: 1 }, position: null, min: { default: -1 / 0 }, max: { default: 1 / 0 } }, emits: ["update:modelValue", "change"], setup(e2, { emit: l2 }) {
  const y2 = e2, { size: h } = function(e3) {
    return { size: t(() => {
      const t2 = a("LayForm", {});
      return e3.size || t2.size || "md";
    }) };
  }(y2);
  let N = n(y2.modelValue);
  i(N, (e3) => {
    y2.max !== 1 / 0 && e3 > y2.max ? N.value = y2.max : y2.min !== -1 / 0 && e3 < y2.min ? N.value = y2.min : B(N.value) && (S.value = Number(N.value), l2("update:modelValue", S.value), l2("change", S.value));
  }), i(() => y2.modelValue, (e3) => {
    e3 !== N.value && (N.value = y2.modelValue);
  });
  let x = 0;
  const S = n(0), M = t(() => !!y2.disabled || (y2.min !== -1 / 0 ? Number(y2.min) >= N.value : void 0)), z = t(() => !!y2.disabled || (y2.max !== 1 / 0 ? Number(y2.max) <= N.value : void 0)), V = function() {
    N.value = function(e3, t2) {
      var a2, l3, n2, i2;
      try {
        a2 = e3.toString().split(".")[1].length;
      } catch (e4) {
        a2 = 0;
      }
      try {
        l3 = t2.toString().split(".")[1].length;
      } catch (e4) {
        l3 = 0;
      }
      if (i2 = Math.abs(a2 - l3), n2 = Math.pow(10, Math.max(a2, l3)), i2 > 0) {
        var u2 = Math.pow(10, i2);
        a2 > l3 ? (e3 = Number(e3.toString().replace(".", "")), t2 = Number(t2.toString().replace(".", "")) * u2) : (e3 = Number(e3.toString().replace(".", "")) * u2, t2 = Number(t2.toString().replace(".", "")));
      } else
        e3 = Number(e3.toString().replace(".", "")), t2 = Number(t2.toString().replace(".", ""));
      return (e3 + t2) / n2;
    }(N.value, y2.step);
  }, w = function() {
    N.value = function(e3, t2) {
      var a2, l3, n2, i2;
      try {
        a2 = e3.toString().split(".")[1].length;
      } catch (e4) {
        a2 = 0;
      }
      try {
        l3 = t2.toString().split(".")[1].length;
      } catch (e4) {
        l3 = 0;
      }
      if (i2 = Math.abs(a2 - l3), n2 = Math.pow(10, Math.max(a2, l3)), i2 > 0) {
        var u2 = Math.pow(10, i2);
        a2 > l3 ? (e3 = Number(e3.toString().replace(".", "")), t2 = Number(t2.toString().replace(".", "")) * u2) : (e3 = Number(e3.toString().replace(".", "")) * u2, t2 = Number(t2.toString().replace(".", "")));
      } else
        e3 = Number(e3.toString().replace(".", "")), t2 = Number(t2.toString().replace(".", ""));
      return (e3 - t2) / n2;
    }(N.value, y2.step);
  }, I = function(e3) {
    _(), y2.disabled || (x = setInterval(() => e3.call(x), 150), e3.call(x));
  }, _ = function() {
    clearInterval(x);
  }, j = function() {
    B(N.value) ? S.value = Number(N.value) : N.value = S.value;
  }, B = function(e3) {
    return !isNaN(e3);
  };
  return (t2, a2) => (u(), o("div", { class: "layui-input-number", position: e2.position, size: r(h) }, [s(v, { size: "lg", onMouseup: _, onMousedown: a2[0] || (a2[0] = (e3) => I(w)), onBlur: _, disabled: r(M), class: "layui-control-btn layui-subtraction-btn" }, { default: d(() => [s(r(b), { type: "right" === e2.position ? "layui-icon-down" : "layui-icon-subtraction" }, null, 8, ["type"])]), _: 1 }, 8, ["disabled"]), m("div", f, [s(c, { max: e2.max, min: e2.min, name: e2.name, modelValue: r(N), "onUpdate:modelValue": a2[1] || (a2[1] = (e3) => p(N) ? N.value = e3 : N = e3), readonly: e2.disabledInput || e2.disabled, disabled: e2.disabledInput || e2.disabled, onInput: j, type: "number" }, null, 8, ["max", "min", "name", "modelValue", "readonly", "disabled"])]), s(v, { size: "lg", onMouseup: _, onMousedown: a2[2] || (a2[2] = (e3) => I(V)), onBlur: _, disabled: r(z), class: "layui-control-btn layui-addition-btn" }, { default: d(() => [s(r(b), { type: "right" === e2.position ? "layui-icon-up" : "layui-icon-addition" }, null, 8, ["type"])]), _: 1 }, 8, ["disabled"])], 8, g));
} }));
export { y as default };
