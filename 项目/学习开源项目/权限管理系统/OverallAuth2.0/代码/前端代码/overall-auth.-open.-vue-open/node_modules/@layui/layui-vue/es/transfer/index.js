import { w as e } from "../utils/index.js";
import { defineComponent as l, useSlots as a, ref as u, watch as t, computed as i, openBlock as d, createElementBlock as r, createElementVNode as s, normalizeStyle as o, unref as n, createVNode as v, withCtx as f, renderSlot as h, createTextVNode as c, toDisplayString as m, createCommentVNode as p, Fragment as y, renderList as g } from "vue";
import { _ as V } from "../input/index2.js";
import { _ as x } from "../button/index2.js";
import { a as b } from "../checkbox/index2.js";
const k = { class: "layui-transfer layui-form layui-border-box" }, M = { class: "layui-transfer-header" }, w = { key: 0, class: "layui-transfer-search" }, _ = { class: "layui-transfer-data" }, S = { key: 1, class: "layui-transfer-footer" }, $ = { class: "layui-transfer-active" }, O = { class: "layui-transfer-button-group" }, U = s("i", { class: "layui-icon layui-icon-next" }, null, -1), E = s("i", { class: "layui-icon layui-icon-prev" }, null, -1), j = { class: "layui-transfer-header" }, C = { key: 0, class: "layui-transfer-search" }, F = { class: "layui-transfer-data" }, T = { key: 1, class: "layui-transfer-footer" }, L = e(l({ name: "LayTransfer", props: { id: { default: "id" }, title: { default: () => ["\u4E3B\u5217\u8868", "\u526F\u5217\u8868"] }, width: { default: "200px" }, height: { default: "360px" }, showSearch: { default: false }, dataSource: { default: () => [] }, modelValue: { default: () => [] }, searchMethod: null }, emits: ["update:modelValue", "change"], setup(e2, { emit: l2 }) {
  const L2 = e2, q = a(), z = u([]), A = u([]), B = u([]), D = u([]), G = u([]), H = u([]), I = u(false), J = u(false), K = u(false), N = u(false), P = u(""), Q = u(""), R = (e3) => {
    if (e3) {
      const e4 = z.value.filter((e5) => !e5.disabled).map((e5) => e5[L2.id]);
      G.value = [...e4];
    } else
      G.value = [];
  };
  t(() => [L2.modelValue, L2.dataSource], () => {
    let e3 = [], l3 = [];
    L2.dataSource.forEach((l4) => {
      L2.modelValue.includes(l4[L2.id]) && e3.push(l4);
    }), L2.dataSource.forEach((e4) => {
      L2.modelValue.includes(e4[L2.id]) || l3.push(e4);
    }), "" != P.value ? z.value = l3.filter((e4) => {
      var _a;
      if (L2.searchMethod) {
        if (L2.searchMethod(P.value, e4))
          return e4;
      } else if (-1 != ((_a = e4.title) == null ? void 0 : _a.indexOf(P.value)))
        return e4;
    }) : z.value = [...l3], "" != Q.value ? A.value = e3.filter((e4) => {
      var _a;
      if (L2.searchMethod) {
        if (L2.searchMethod(Q.value, e4))
          return e4;
      } else if (-1 != ((_a = e4.title) == null ? void 0 : _a.indexOf(Q.value)))
        return e4;
    }) : A.value = [...e3], B.value = [...l3], D.value = [...e3];
  }, { immediate: true }), t(G, () => {
    z.value.length === G.value.length && 0 != z.value.length ? I.value = true : I.value = false, G.value.length > 0 && 0 != z.value.length ? K.value = true : K.value = false;
  }, { deep: true });
  const W = (e3) => {
    if (e3) {
      const e4 = A.value.filter((e5) => !e5.disabled).map((e5) => e5[L2.id]);
      H.value = [...e4];
    } else
      H.value = [];
  };
  t(H, () => {
    A.value.length === H.value.length && A.value.length > 0 ? J.value = true : J.value = false, H.value.length > 0 && 0 != A.value.length ? N.value = true : N.value = false;
  }, { deep: true });
  const X = () => {
    if (0 === G.value.length)
      return;
    let e3 = [];
    z.value.forEach((l3) => {
      -1 != G.value.indexOf(l3[L2.id]) && e3.push(l3[L2.id]);
    }), D.value.forEach((l3) => {
      e3.push(l3[L2.id]);
    }), l2("change", e3), l2("update:modelValue", e3), G.value = [];
  }, Y = () => {
    if (0 === H.value.length)
      return;
    let e3 = [];
    D.value.forEach((l3) => {
      -1 == H.value.indexOf(l3[L2.id]) && e3.push(l3[L2.id]);
    }), l2("change", e3), l2("update:modelValue", e3), H.value = [];
  };
  t(P, () => {
    "" === P.value && (z.value = B.value), z.value = B.value.filter((e3) => {
      var _a;
      if (L2.searchMethod) {
        if (L2.searchMethod(P.value, e3))
          return e3;
      } else if (-1 != ((_a = e3.title) == null ? void 0 : _a.indexOf(P.value)))
        return e3;
    });
  }), t(Q, () => {
    "" === Q.value && (A.value = D.value), A.value = D.value.filter((e3) => {
      var _a;
      if (L2.searchMethod) {
        if (L2.searchMethod(Q.value, e3))
          return e3;
      } else if (-1 != ((_a = e3.title) == null ? void 0 : _a.indexOf(Q.value)))
        return e3;
    });
  });
  const Z = i(() => ({ width: L2.width, height: L2.height, flex: `0 0 ${L2.width}` }));
  return (l3, a2) => (d(), r("div", null, [s("div", k, [s("div", { class: "layui-transfer-box", style: o(n(Z)) }, [s("div", M, [v(b, { modelValue: K.value, "onUpdate:modelValue": a2[0] || (a2[0] = (e3) => K.value = e3), "is-indeterminate": !I.value, skin: "primary", value: "all", onChange: R }, { default: f(() => [h(l3.$slots, "leftTitle", {}, () => [c(m(e2.title[0]), 1)])]), _: 3 }, 8, ["modelValue", "is-indeterminate"])]), e2.showSearch ? (d(), r("div", w, [v(V, { modelValue: P.value, "onUpdate:modelValue": a2[1] || (a2[1] = (e3) => P.value = e3), "prefix-icon": "layui-icon-search", placeholder: "\u5173\u952E\u8BCD\u641C\u7D22" }, null, 8, ["modelValue"])])) : p("", true), s("ul", _, [(d(true), r(y, null, g(z.value, (u2) => (d(), r("li", { key: u2 }, [v(b, { modelValue: G.value, "onUpdate:modelValue": a2[2] || (a2[2] = (e3) => G.value = e3), skin: "primary", disabled: u2.disabled, value: u2[e2.id] }, { default: f(() => [n(q).item ? h(l3.$slots, "item", { key: 0, data: u2 }) : (d(), r(y, { key: 1 }, [c(m(u2.title), 1)], 64))]), _: 2 }, 1032, ["modelValue", "disabled", "value"])]))), 128))]), n(q).leftFooter ? (d(), r("div", S, [h(l3.$slots, "leftFooter")])) : p("", true)], 4), s("div", $, [s("div", O, [v(x, { type: "primary", disabled: 0 == G.value.length, onClick: X }, { default: f(() => [U]), _: 1 }, 8, ["disabled"]), v(x, { type: "primary", disabled: 0 == H.value.length, onClick: Y }, { default: f(() => [E]), _: 1 }, 8, ["disabled"])])]), s("div", { class: "layui-transfer-box", style: o(n(Z)) }, [s("div", j, [v(b, { modelValue: N.value, "onUpdate:modelValue": a2[3] || (a2[3] = (e3) => N.value = e3), "is-indeterminate": !J.value, skin: "primary", value: "all", onChange: W }, { default: f(() => [h(l3.$slots, "rightTitle", {}, () => [c(m(e2.title[1]), 1)])]), _: 3 }, 8, ["modelValue", "is-indeterminate"])]), e2.showSearch ? (d(), r("div", C, [v(V, { modelValue: Q.value, "onUpdate:modelValue": a2[4] || (a2[4] = (e3) => Q.value = e3), "prefix-icon": "layui-icon-search", placeholder: "\u5173\u952E\u8BCD\u641C\u7D22" }, null, 8, ["modelValue"])])) : p("", true), s("ul", F, [(d(true), r(y, null, g(A.value, (u2) => (d(), r("li", { key: u2 }, [v(b, { skin: "primary", modelValue: H.value, "onUpdate:modelValue": a2[5] || (a2[5] = (e3) => H.value = e3), disabled: u2.disabled, value: u2[e2.id] }, { default: f(() => [n(q).item ? h(l3.$slots, "item", { key: 0, data: u2 }) : (d(), r(y, { key: 1 }, [c(m(u2.title), 1)], 64))]), _: 2 }, 1032, ["modelValue", "disabled", "value"])]))), 128))]), n(q).rightFooter ? (d(), r("div", T, [h(l3.$slots, "rightFooter")])) : p("", true)], 4)])]));
} }));
export { L as default };
