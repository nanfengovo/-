import { w as e } from "../utils/index.js";
import { defineComponent as a, useSlots as l, computed as t, ref as d, watch as s, openBlock as n, createElementBlock as u, createElementVNode as r, Fragment as o, renderList as i, unref as c, toDisplayString as m, normalizeClass as y, renderSlot as p, resolveComponent as f, createVNode as Y, withCtx as v, createTextVNode as D, createSlots as b, normalizeProps as M, mergeProps as h, createCommentVNode as k } from "vue";
import { d as x } from "../_chunks/dayjs/index.js";
import { _ } from "../dropdownMenu/index2.js";
import "../_chunks/@umijs/index.js";
const g = ["\u4E00", "\u4E8C", "\u4E09", "\u56DB", "\u4E94", "\u516D", "\u65E5"];
const C = { class: "layui-calendar-table", cellspacing: "0", cellpadding: "0" }, j = ["onClick"], V = a({ name: "LayCalendarDateTable", props: { date: { default: Date.now() }, fullscreen: { type: Boolean, default: true }, disabledDate: null }, emits: ["click", "update:modelValue"], setup(e2, { emit: a2 }) {
  const f2 = e2;
  l();
  const Y2 = t(() => {
    const e3 = ((e4) => {
      const a4 = x(e4).daysInMonth();
      return Array(a4).fill(x).map((a5, l3) => x(e4).set("date", l3 + 1).format("YYYY-MM-DD"));
    })(f2.date).map((e4) => ({ text: e4, type: "current" })), a3 = ((e4) => {
      const a4 = x(e4).startOf("month").day(), l3 = (0 === a4 ? 7 : a4) + 7 - 7 - 1, t3 = x(e4).subtract(1, "month").endOf("month").date();
      return Array(l3).fill(l3).map((a5, d3) => x(e4).subtract(1, "month").set("date", t3 - (l3 - d3 - 1)).format("YYYY-MM-DD"));
    })(f2.date).map((e4) => ({ text: e4, type: "prev" })), l2 = [...a3, ...e3], t2 = 7 - (l2.length % 7 || 7), d2 = ((e4, a4) => Array(a4).fill(a4).map((a5, l3) => x(e4).add(1, "month").set("date", l3 + 1).format("YYYY-MM-DD")))(f2.date, t2).map((e4) => ({ text: e4, type: "next" }));
    return v2([...l2, ...d2]);
  }), v2 = (e3) => Array(e3.length / 7).fill(e3.length / 7).map((a3, l2) => {
    const t2 = 7 * l2;
    return e3.slice(t2, t2 + 7);
  }), D2 = d(x(f2.date).format("YYYY-MM-DD")), b2 = t(() => f2.date);
  s(() => b2, (e3) => {
    D2.value = x(e3.value).format("YYYY-MM-DD"), a2("update:modelValue", D2.value);
  }, { deep: true });
  return (l2, t2) => (n(), u("table", C, [r("thead", null, [(n(true), u(o, null, i(c(g), (e3) => (n(), u("th", { key: e3 }, m(e3), 1))), 128))]), r("tbody", null, [(n(true), u(o, null, i(c(Y2), (t3, d2) => (n(), u("tr", { key: d2 }, [(n(true), u(o, null, i(t3, (t4, d3) => {
    return n(), u("td", { class: y(["layui-calendar-" + t4.type]), key: d3 }, [r("div", { onClick: (e3) => {
      return l3 = t4.text, void (f2.disabledDate && f2.disabledDate(l3) || (D2.value = l3, a2("click", D2.value)));
      var l3;
    }, class: y([e2.fullscreen ? "layui-calendar-day" : "layui-calendar-isfullscreen", { "layui-calendar-is-selcted": D2.value === t4.text, "layui-calendar-is-disabled": e2.disabledDate && e2.disabledDate(t4.text) }]) }, [p(l2.$slots, "cell", { data: (s2 = t4, { ...s2, isSelected: D2.value === s2.text }) }, () => [r("span", null, m(t4.text), 1)], true)], 10, j)], 2);
    var s2;
  }), 128))]))), 128))])]));
} });
var $ = _(V, [["__scopeId", "data-v-6f9f5a48"]]);
const w = { class: "layui-calendar" }, A = { class: "layui-calendar-header" }, z = { class: "layui-calendar-title" }, B = { class: "layui-calendar-group" }, I = { class: "layui-calendar-body" }, L = e(a({ name: "LayCalendar", props: { modelValue: { default: Date.now() }, fullscreen: { type: Boolean, default: true }, disabledDate: null }, emits: ["click", "update:modelValue"], setup(e2, { emit: a2 }) {
  const l2 = d(e2.modelValue), s2 = t(() => x(l2.value).format("YYYY-MM")), i2 = () => {
    l2.value = x().format("YYYY-MM-DD");
  }, y2 = t(() => x(l2.value).subtract(1, "month").date(1)), _2 = t(() => x(l2.value).add(1, "month").date(1)), g2 = () => {
    l2.value = y2.value.format("YYYY-MM-DD");
  }, C2 = () => {
    l2.value = _2.value.format("YYYY-MM-DD");
  }, j2 = (e3) => {
    a2("click", e3), a2("update:modelValue", e3);
  };
  return (a3, t2) => {
    const d2 = f("lay-icon"), y3 = f("lay-button"), x2 = f("lay-button-group");
    return n(), u("div", w, [r("div", A, [a3.$slots.header ? p(a3.$slots, "header", { key: 0, date: c(s2) }) : (n(), u(o, { key: 1 }, [r("div", z, m(c(s2)), 1), r("div", B, [Y(x2, null, { default: v(() => [Y(y3, { size: "sm", onClick: g2 }, { default: v(() => [Y(d2, { type: "layui-icon-left" })]), _: 1 }), Y(y3, { size: "sm", type: "default", onClick: i2 }, { default: v(() => [D("\u4ECA\u5929")]), _: 1 }), Y(y3, { size: "sm", onClick: C2 }, { default: v(() => [Y(d2, { type: "layui-icon-right" })]), _: 1 })]), _: 1 })])], 64))]), r("div", I, [Y($, { disabledDate: e2.disabledDate, fullscreen: e2.fullscreen, date: l2.value, onClick: j2 }, b({ _: 2 }, [a3.$slots.cell ? { name: "cell", fn: v((e3) => [a3.$slots.cell ? p(a3.$slots, "cell", M(h({ key: 0 }, e3))) : k("", true)]), key: "0" } : void 0]), 1032, ["disabledDate", "fullscreen", "date"])])]);
  };
} }));
export { L as default };
